# 小组件尺寸适配指南

## 概述

已成功将新浪美股小组件适配为不同尺寸的布局，每个尺寸显示不同数量的股票信息。

## 实现的功能

### 1. 不同尺寸的小组件布局

- **小号小组件 (systemSmall)**: 只显示 1 个股票，特殊布局设计
- **中号小组件 (systemMedium)**: 最多显示 5 个股票  
- **大号小组件 (systemLarge)**: 最多显示 10 个股票
- **超大号小组件 (systemExtraLarge)**: 使用大号布局，最多显示 10 个股票

### 2. 小号小组件特殊布局

小号小组件采用全新的四行布局设计，专注于单个股票的核心信息展示：

```
┌─────────────────┐
│ 股票名称        │  ← 第一行：股票名称 (16px, bold) 左对齐
│                 │
│ 当前价格         │  ← 第二行：当前价格 (30px, bold) 左对齐 - 视觉核心
│                 │
│ 涨跌价 涨跌幅     │  ← 第三行：涨跌信息 (14px, medium) 左对齐
│                 │
│ 更新时间         │  ← 第四行：更新时间 (10px, 半透明) 左对齐
└─────────────────┘
```

**布局特点：**
- **第一行**: 股票名称，16px字体，加粗，左对齐
- **第二行**: 当前价格，30px字体，加粗，左对齐，作为视觉核心
- **第三行**: 涨跌价和涨跌幅，14px字体，中等粗细，左对齐，红绿色显示涨跌
- **第四行**: 更新时间，10px字体，半透明，左对齐

**空间优化：**
- **行距**: 6px 间距，平衡各元素间的空间
- **内边距**: 10px，提供适当的边距
- **垂直对齐**: 内容左对齐，充分利用水平空间
- **基线对齐**: 涨跌信息使用 `firstTextBaseline` 对齐，确保文字整齐

**字体设计考虑：**
- **股票名称突出**: 16px加粗字体确保股票名称清晰可见
- **价格字体优化**: 30px字体确保千元价格（如523.61）在小号小组件中清晰可读
- **视觉层次**: 股票名称和价格都使用加粗，涨跌信息使用中等粗细，创建清晰层次
- **空间效率**: 在有限的小号小组件空间内最大化信息可读性

### 3. 创建的文件

#### 新增组件文件
- `src/components/SmallStockWidget.tsx` - 小号小组件布局（特殊设计）
- `src/components/MediumStockWidget.tsx` - 中号小组件布局
- `src/components/LargeStockWidget.tsx` - 大号小组件布局
- `src/components/AdaptiveStockWidget.tsx` - 自适应布局选择器

#### 更新的文件
- `src/config/constants.ts` - 添加了不同尺寸的显示限制常量
- `src/components/StockWidget.tsx` - 更新为使用自适应布局

### 4. 配置常量更新

```typescript
export const UI_CONFIG = {
  MAX_DISPLAY_STOCKS_SMALL: 1,    // 小号只显示1个股票
  MAX_DISPLAY_STOCKS_MEDIUM: 5,   // 中号最多5个
  MAX_DISPLAY_STOCKS_LARGE: 10,   // 大号最多10个
  DEFAULT_DECIMAL_PLACES: 2,
  SPACING: 6,
  PADDING: 8
} as const
```

### 5. 自适应逻辑

`AdaptiveStockWidget` 组件会根据 `Widget.family` 自动选择合适的布局：

```typescript
switch (widgetFamily) {
  case "systemSmall":
    return <SmallStockWidget stocks={stocks} />
  case "systemMedium":
    return <MediumStockWidget stocks={stocks} />
  case "systemLarge":
  case "systemExtraLarge":
    return <LargeStockWidget stocks={stocks} />
  default:
    return <MediumStockWidget stocks={stocks} />
}
```

### 6. 布局优化

不同尺寸的小组件有不同的布局优化：

- **小号小组件**: 特殊的四行布局，左对齐，均匀分布，专注于单个股票的核心信息
- **中号小组件**: 标准间距和字体，列表式布局
- **大号小组件**: 标准布局，可以显示更多股票

## 使用方法

1. 小组件会自动根据用户选择的尺寸显示相应数量的股票
2. 小号小组件只显示第一个股票，采用特殊的四行左对齐布局
3. 数据获取和缓存逻辑保持不变
4. 所有尺寸共享相同的股票数据源

## 测试

可以通过运行 `widget.tsx` 文件来预览不同尺寸的小组件显示效果。

## 技术特点

- **模块化设计**: 每个尺寸都有独立的组件文件
- **自适应布局**: 根据小组件尺寸自动选择合适的布局
- **视觉层次**: 小号小组件通过字体大小和粗细创建清晰的信息层次
- **空间利用**: 左对齐和适当行距确保内容均匀占满垂直空间
- **代码复用**: 共享 StockRow 组件和数据获取逻辑
- **类型安全**: 完整的 TypeScript 类型定义

## 设计理念

小号小组件的设计遵循"少即是多"的原则，通过以下方式提升用户体验：

1. **聚焦核心**: 只显示最重要的单个股票信息
2. **视觉层次**: 通过字体大小和粗细差异创建清晰的信息优先级
3. **空间优化**: 左对齐和适当行距让内容均匀占满垂直空间
4. **快速识别**: 30px大字体价格和16px加粗股票名称让用户一眼就能看到关键信息
5. **整洁对齐**: 所有内容左对齐，基线对齐确保文字整齐美观

## 最新更新

- ✅ 所有内容左对齐
- ✅ 股票名称调整为16px加粗，提升可见性
- ✅ 当前价格保持30px加粗，确保千元价格清晰可读
- ✅ 涨跌信息保持14px中等粗细，与股票名称形成层次对比
- ✅ 行距调整为6px，平衡大字体与空间利用
- ✅ 优化内边距，提供更好的视觉效果
- ✅ 涨跌信息使用基线对齐，确保文字整齐